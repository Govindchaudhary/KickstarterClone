{"version":3,"file":"7.5fd212dba1086c358892.hot-update.js","sources":["webpack:///pages/campaigns/requests/new.js"],"sourcesContent":["import React,{Component} from 'react';\r\nimport Layout from '../../../components/Layout';\r\nimport {Form,Button,Input,Message} from 'semantic-ui-react';\r\nimport findCampaign from '../../../ethereum/campaign';\r\nimport web3 from '../../../ethereum/web3';\r\nimport {Router} from '../../../routes';\r\n\r\nclass NewCampaignRequest extends Component {\r\n    state={money:'',description:'',recipient:'',loading:false,errorMessage:''}\r\n\r\n   static getInitialProps(props) {\r\n        return{address:props.query.address}\r\n    }\r\n\r\n    submit = async(event) =>{\r\n        event.preventDefault();\r\n        this.setState({loading:true,errorMessage:''})\r\n        try {\r\n            const campaign = await findCampaign(this.props.address);\r\n            const accounts = await web3.eth.getAccounts();\r\n            await campaign.methods.createRequest(this.state.description,web3.utils.toWei(this.state.money,'ether'),this.state.recipient)\r\n            .send({from:accounts[0]});\r\n\r\n            Router.pushRoute(`/campaigns/${this.props.address}/requests`)\r\n            this.setState({loading:false});\r\n            \r\n\r\n\r\n        }\r\n        catch(err) {\r\n            this.setState({errorMessage:err.message,loading:false})\r\n        }\r\n        \r\n\r\n\r\n\r\n    }\r\n    render()\r\n    {\r\n        return(\r\n            <Layout>\r\n                <h3>Create a Request</h3>\r\n                <Form onSubmit = {this.submit} error={!!this.state.errorMessage} style={{width:\"70%\"}}>\r\n                    <Form.Field>\r\n                        <label>Description</label>\r\n                        <Input action={{  icon: 'address card' }} value={this.state.description} onChange={event => this.setState({description:event.target.value})}/>\r\n                    </Form.Field>\r\n                    <Form.Field>\r\n                        <label>Value in ether</label>\r\n                        <Input value={this.state.money} onChange={event =>this.setState({money:event.target.value})}/>\r\n                    </Form.Field>\r\n                    <Form.Field>\r\n                        <label>Recipient</label>\r\n                        <Input value={this.state.recipient} onChange={event => this.setState({recipient:event.target.value})}/>\r\n                    </Form.Field>\r\n                    <Message negative error header=\"something went wrong\" content={this.state.errorMessage}/>\r\n                    <Button loading={this.state.loading}  primary content=\"Create!\"/>\r\n                </Form>\r\n            </Layout>\r\n        )\r\n    }\r\n}\r\nexport default NewCampaignRequest;\n\n\n// WEBPACK FOOTER //\n// pages/campaigns/requests/new.js"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;AAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAHA;AAAA;AAAA;AACA;AADA;AAIA;AAJA;AAAA;AACA;AADA;AAKA;AALA;AAAA;AAOA;AAAA;AACA;AARA;AASA;AACA;AAAA;AAAA;AAAA;AACA;AAXA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AAeA;AAAA;AAAA;AAAA;AACA;AAjBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;;;;;;AAuBA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;;;AAlDA;AACA;AAAA;AAAA;AACA;;;;AALA;AACA;AAsDA;;;;;;;;;;;;;;;;;;;;;;;A","sourceRoot":""}