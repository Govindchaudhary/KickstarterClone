{"version":3,"file":"4.aafbc21c6c59f42322bd.hot-update.js","sources":["webpack:///pages/campaigns/requests/index.js"],"sourcesContent":["import React,{Component} from 'react';\r\nimport Layout from '../../../components/Layout';\r\nimport { Table,Grid,Button } from 'semantic-ui-react';\r\nimport {Link} from '../../../routes';\r\nimport findCampaign from '../../../ethereum/campaign';\r\nimport web3 from '../../../ethereum/web3'\r\nimport RequestRow from '../../../components/RequestRow';\r\n\r\nclass CampaignRequests extends Component {\r\n\r\n    static async getInitialProps(props) {\r\n        const campaign = await findCampaign(props.query.address);\r\n        const approversCount = await campaign.methods.approversCount().call();\r\n        const requestsCount = await campaign.methods.getRequestsCount().call();\r\n        \r\n\r\n       //now we want an array of all the diffrent indexes from 0 to requestCount\r\n       //Array(n).fill()  will create an array of indices from 0 to n\r\n       //Promise.all() creates an array of promises that resolved when all the individual promise is resolved\r\n\r\n       const requests = await Promise.all(\r\n           Array(parseInt(requestsCount)).fill().map((element,index) => {\r\n               return campaign.methods.requests(index).call()\r\n           })\r\n       );\r\n\r\n     \r\n        \r\n        return {requests:requests,approversCount:approversCount,address:props.query.address}\r\n\r\n    }\r\n\r\n    \r\n     renderRows() {\r\n       return this.props.requests.map((request,index) => {\r\n           return(\r\n              <RequestRow\r\n              key={index}\r\n               requests={request} \r\n               index={index} \r\n               approversCount={this.props.approversCount} \r\n               address={this.props.address}/>\r\n           )\r\n       })\r\n    }\r\n\r\n\r\n    render() {\r\n        return(\r\n            <Layout>\r\n                       <h3>Requests</h3>\r\n                    \r\n                        <Link route={`/campaigns/${this.props.address}/requests/new`}>\r\n                          <a>  <Button floated=\"right\" primary content=\"Add Request\"/></a>\r\n                        </Link>\r\n                    \r\n                        <Table striped style={{marginTop:\"7%\"}}>\r\n                           <Table.Header>\r\n                               <Table.Row>\r\n                               <Table.HeaderCell>ID</Table.HeaderCell>\r\n                                   <Table.HeaderCell>Description</Table.HeaderCell>\r\n                                   <Table.HeaderCell>Amount(in Ether)</Table.HeaderCell>\r\n                                   <Table.HeaderCell>Recipient</Table.HeaderCell>\r\n                                   <Table.HeaderCell>Approval Count</Table.HeaderCell>\r\n                                   <Table.HeaderCell>Approve</Table.HeaderCell>\r\n                                   <Table.HeaderCell>Finalize</Table.HeaderCell>\r\n                                </Table.Row>\r\n                           </Table.Header>\r\n                           <Table.Body>\r\n                               {this.renderRows()}\r\n                            </Table.Body>\r\n\r\n                        </Table>\r\n\r\n                        <div>{requests.length}</div>\r\n                   \r\n\r\n            </Layout>\r\n        )\r\n    }\r\n}\r\n\r\nexport default CampaignRequests;\n\n\n// WEBPACK FOOTER //\n// pages/campaigns/requests/index.js"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;AAyBA;AAAA;AACA;AAAA;AACA;AAEA;AACA;AACA;AACA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;;;AAGA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAMA;AAAA;AAAA;AAAA;AAAA;AAKA;;;;;;AArEA;;;;;;;AACA;AACA;;AADA;;AACA;AACA;;AADA;;AACA;AACA;;AADA;;AAOA;AAEA;AACA;AACA;;AAJA;AAQA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;;;;;;;;;;;;AArBA;AACA;AAyEA;;;;;;;;;;;;;;;;;;;;;;;A","sourceRoot":""}