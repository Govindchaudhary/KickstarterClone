{"version":3,"file":"4.bece9880065f19ccd6bc.hot-update.js","sources":["webpack:///components/RequestRow.js"],"sourcesContent":["import React,{Component} from 'react';\r\nimport web3 from '../ethereum/web3';\r\nimport {Table,Button,Modal} from 'semantic-ui-react';\r\nimport findCampaign from '../ethereum/campaign';\r\nimport {Router} from '../routes';\r\n\r\nclass RequestRow extends Component {\r\n    state={approverLoading:false,finalizeLoading:false,errorApprove:'',errorFinalize:''}\r\n    \r\n\r\n    approve =async() => {\r\n        this.setState({approverLoading:true,errorApprove:''});\r\n        try{\r\n            const campaign = await findCampaign(this.props.address);\r\n        const accounts = await web3.eth.getAccounts()\r\n        await campaign.methods.approveRequest(this.props.index).send({from:accounts[0]});\r\n        Router.replaceRoute(`/campaigns/${this.props.address}/requests`);\r\n        this.setState({approverLoading:false});\r\n\r\n        }\r\n        catch(err)\r\n        {\r\n            this.setState({errorApprove:err.message,approverLoading:false});\r\n\r\n        }\r\n        \r\n\r\n    }\r\n\r\n    onFinalize = async() => {\r\n        this.setState({finalizeLoading:true,errorFinalize:''})\r\n        try{\r\n            const campaign = await findCampaign(this.props.address);\r\n        const accounts = await web3.eth.getAccounts()\r\n        await campaign.methods.finalizeRequest(this.props.index).send({from:accounts[0]});\r\n        this.setState({finalizeLoading:false})\r\n            \r\n        }\r\n        catch(err){\r\n            this.setState({errorFinalize:err.message,finalizeLoading:false})\r\n        }\r\n        \r\n       \r\n\r\n    }\r\n\r\n\r\n    render(){\r\n        return(\r\n            <Table.Row style={this.props.requests.complete?{color:\"gray\"}:null}>\r\n            <Table.Cell>{this.props.index}</Table.Cell>\r\n            <Table.Cell>{this.props.requests.description}</Table.Cell>\r\n            <Table.Cell>{web3.utils.fromWei(this.props.requests.value,'ether')}</Table.Cell>\r\n            <Table.Cell>{this.props.requests.recipient}</Table.Cell>\r\n            <Table.Cell>{this.props.requests.approvalCount}/{this.props.approversCount}</Table.Cell>\r\n           {\r\n               this.props.requests.complete?null:<Table.Cell><Button loading={this.state.approverLoading} color=\"green\" basic content=\"Approve\" onClick ={this.approve}/></Table.Cell>\r\n            } \r\n            {\r\n                this.props.requests.complete?null:<Table.Cell><Button loading={this.state.finalizeLoading} color=\"teal\" disabled={this.props.requests.approvalCount >(this.props.approversCount/2)?false:true } basic content=\"Finalize\" onClick={this.onFinalize}/></Table.Cell>\r\n            }\r\n            <Modal defaultOpen={!!this.state.errorFinalize}>\r\n                     <Modal.Header>Select a Photo</Modal.Header>\r\n                        <Modal.Content >\r\n      \r\n                          <Modal.Description>\r\n        \r\n                            <p>We've found the following gravatar image associated with your e-mail address.</p>\r\n                            <p>Is it okay to use this photo?</p>\r\n                         </Modal.Description>\r\n                       </Modal.Content>\r\n            </Modal>\r\n         </Table.Row>\r\n\r\n        )\r\n    }\r\n}\r\nexport default RequestRow\n\n\n// WEBPACK FOOTER //\n// components/RequestRow.js"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAFA;AAAA;AAAA;AACA;AADA;AAGA;AAHA;AAAA;AACA;AADA;AAIA;AAJA;AAAA;AAKA;AAAA;AACA;AANA;AAMA;AACA;AAAA;AAAA;AAAA;AACA;AARA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AAWA;AAAA;AAAA;AAAA;AACA;AAbA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;;;;;;;;AAkBA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAFA;AAAA;AAAA;AACA;AADA;AAGA;AAHA;AAAA;AACA;AADA;AAIA;AAJA;AAAA;AAKA;AAAA;AACA;AANA;AAMA;AAAA;AAAA;AACA;AAPA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AASA;AAAA;AAAA;AAAA;AACA;AAXA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;;;;;;;;;;AAiBA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAOA;;;;AArEA;AACA;AAsEA;;;;A","sourceRoot":""}